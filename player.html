<script>
    const urlParams = new URLSearchParams(window.location.search);
    const videoId = urlParams.get('v');
    const listId = urlParams.get('list');
    const listType = urlParams.get('listType');

    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    function onYouTubeIframeAPIReady() {
        let playerConfig = {
            height: '100%',
            width: '100%',
            playerVars: { 'autoplay': 1, 'playsinline': 1, 'rel': 0 },
            events: { 'onReady': (e) => e.target.playVideo() }
        };

        // If it's a playlist, use the list settings
        if (listId) {
            playerConfig.playerVars.listType = 'playlist';
            playerConfig.playerVars.list = listId;
        } else if (videoId) {
            playerConfig.videoId = videoId;
        }

        new YT.Player('player', playerConfig);
    }
</script>
